<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UKI-Wallet (Mobile Prototype)</title>
<style>
  :root{
    --gold:#C9A227;
    --gold-2:#E6C766;
    --gold-3:#8C6E00;
    --bg:#0F1115;
    --card:#171A21;
    --text:#F6F6F6;
    --muted:#A7A7A7;
    --ok:#2ecc71;
    --warn:#f39c12;
    --err:#e74c3c;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:Inter,system-ui,Arial; background:linear-gradient(180deg,#0B0D10,#12151B 50%, #0B0D10); color:var(--text);
  }
  .app{
    max-width:430px; margin:0 auto; min-height:100svh; display:flex; flex-direction:column;
  }
  header{
    padding:14px 16px; display:flex; align-items:center; gap:12px; position:sticky; top:0; z-index:5;
    background:rgba(15,17,21,0.85); backdrop-filter:blur(8px); border-bottom:1px solid #1f2430;
  }
  .brand{
    display:flex; align-items:center; gap:10px;
  }
  .logo{
    width:34px; height:34px; border-radius:10px;
    background: radial-gradient(120% 120% at 20% 20%, var(--gold-2), var(--gold));
    border:1px solid rgba(255,255,255,0.2); box-shadow:0 0 0 2px rgba(255,215,0,0.1), inset 0 0 16px rgba(0,0,0,0.4);
  }
  .brand h1{font-size:16px; margin:0; letter-spacing:0.4px}
  .pill{
    margin-left:auto; font-size:12px; padding:6px 10px; border-radius:999px; color:#101216;
    background:linear-gradient(180deg,var(--gold-2),var(--gold)); border:1px solid rgba(0,0,0,0.25);
  }
  main{flex:1; padding:16px; display:flex; flex-direction:column; gap:14px}
  .card{
    background:linear-gradient(180deg,#151922,#0F1219);
    border:1px solid #262b37; border-radius:16px; padding:16px; box-shadow:0 4px 24px rgba(0,0,0,0.35);
  }
  .balance{display:flex; align-items:flex-end; justify-content:space-between}
  .balance .amt{
    font-size:28px; font-weight:700;
    background:linear-gradient(180deg,var(--gold-2),var(--gold));
    -webkit-background-clip:text; background-clip:text; color:transparent;
    text-shadow:0 2px 18px rgba(233, 196, 106, 0.2);
  }
  .balance .sub{color:var(--muted); font-size:12px}
  .actions{display:grid; grid-template-columns:repeat(4,1fr); gap:10px}
  .action{
    display:flex; flex-direction:column; align-items:center; gap:8px; cursor:pointer; user-select:none;
  }
  .action .ico{
    width:54px; height:54px; border-radius:14px; display:grid; place-items:center; font-size:20px;
    background:radial-gradient(120% 120% at 20% 20%, #212636, #10131a); border:1px solid #2b3242;
  }
  .action span{font-size:12px; color:#d8d8d8}
  .section-title{margin:8px 0 4px; font-size:14px; color:#d7d7d7}
  .list{display:flex; flex-direction:column; gap:10px}
  .list .row{
    display:flex; align-items:center; justify-content:space-between; padding:12px; border-radius:12px; background:#131720; border:1px solid #232938;
  }
  .row .left{display:flex; align-items:center; gap:12px}
  .ico-sm{
    width:36px; height:36px; border-radius:10px; display:grid; place-items:center; font-size:16px;
    background:radial-gradient(120% 120% at 20% 20%, #202534, #0f1218); border:1px solid #2b3242;
  }
  .row .title{font-size:14px}
  .row .sub{font-size:12px; color:var(--muted)}
  .chip{
    padding:6px 10px; border-radius:999px; font-size:12px; border:1px solid #2b3242; color:#eaeaea;
    background:linear-gradient(180deg,#1b2030,#121722);
  }

  /* bottom nav */
  nav{
    position:sticky; bottom:0; background:rgba(13,15,20,0.85); backdrop-filter:blur(8px);
    border-top:1px solid #202535; display:grid; grid-template-columns:repeat(4,1fr);
  }
  nav button{
    background:none; color:#cfcfcf; border:0; padding:10px 4px; display:flex; flex-direction:column; gap:4px; align-items:center; cursor:pointer
  }
  nav button.active{color:var(--gold-2)}
  nav .ni{font-size:18px}
  nav .nt{font-size:11px}

  /* pages */
  .page{display:none}
  .page.active{display:block}

  /* forms & buttons */
  input, select{
    width:100%; padding:12px 12px; border-radius:12px; background:#0f1218; border:1px solid #2b3242; color:#e0e0e0;
    outline:none;
  }
  label{font-size:12px; color:#b9c0ce}
  .btn{
    width:100%; padding:12px 14px; border-radius:12px; border:1px solid #2b3242; color:#101216; font-weight:600; cursor:pointer;
    background:linear-gradient(180deg,var(--gold-2),var(--gold));
  }
  .btn.ghost{background:transparent; color:#e9e9e9}
  .grid2{display:grid; grid-template-columns:1fr 1fr; gap:10px}

  /* modal & toast */
  .modal-backdrop{
    position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,0.5); z-index:20;
  }
  .modal{width:min(92vw,420px); background:#0e1218; border:1px solid #2b3242; border-radius:16px; padding:16px}
  .modal h3{margin:4px 0 10px}
  .modal .close{float:right; cursor:pointer; color:#999}
  .toast{
    position:fixed; left:50%; transform:translateX(-50%); bottom:84px; z-index:30; display:none;
    background:#0b0f15; color:#eaeaea; border:1px solid #2b3242; padding:10px 14px; border-radius:12px;
  }
  .tag{font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid #2b3242; color:#dcdcdc}
  .tag.ok{border-color:#234; color:#9effc0; background:#0b1b12}
  .tag.err{color:#ffb8b8; background:#2a0f12}
  .tag.pend{color:#ffe7a1; background:#281c06}
</style>
</head>
<body>
<div class="app">
  <header>
    <div class="brand">
      <div class="logo"></div>
      <h1>UKI-Wallet</h1>
    </div>
    <div class="pill" id="tierPill">Tier: BASIC</div>
  </header>

  <main>
    <!-- HOME -->
    <section class="page active" id="page-home">
      <div class="card">
        <div class="balance">
          <div>
            <div class="sub">Available Balance</div>
            <div class="amt" id="balanceText">Rp 0</div>
          </div>
          <button class="chip" id="btnAddMoney">+ Top Up</button>
        </div>
      </div>

      <div class="actions">
        <div class="action" data-nav="transfer">
          <div class="ico">‚û°Ô∏è</div><span>Transfer</span>
        </div>
        <div class="action" data-nav="cashout">
          <div class="ico">üè™</div><span>Cash-out</span>
        </div>
        <div class="action" data-nav="pay">
          <div class="ico">üßæ</div><span>Pay Bills</span>
        </div>
        <div class="action" data-nav="qr">
          <div class="ico">üî≥</div><span>Scan QR</span>
        </div>
      </div>

      <div class="section-title">Shortcuts</div>
      <div class="actions">
        <div class="action" data-nav="topup">
          <div class="ico">üè¶</div><span>Top-up</span>
        </div>
        <div class="action" data-nav="cards">
          <div class="ico">üí≥</div><span>Cards</span>
        </div>
        <div class="action" data-nav="rewards">
          <div class="ico">üéÅ</div><span>Rewards</span>
        </div>
        <div class="action" data-nav="profile">
          <div class="ico">‚öôÔ∏è</div><span>Profile</span>
        </div>
      </div>

      <div class="section-title">Recent Activity</div>
      <div class="list" id="activityList"></div>
    </section>

    <!-- TRANSFER -->
    <section class="page" id="page-transfer">
      <div class="card" style="display:grid; gap:10px">
        <label>Recipient (Phone/ID)
          <input id="tfRecipient" placeholder="+62xxxxxxxxxx"/>
        </label>
        <label>Amount
          <input id="tfAmount" type="number" min="0" step="1000" placeholder="50000"/>
        </label>
        <div class="grid2">
          <button class="btn ghost" data-nav="home">Cancel</button>
          <button class="btn" id="btnTransfer">Send</button>
        </div>
      </div>
      <div class="card">
        <div class="section-title">Tips</div>
        <div class="row"><div class="left"><div class="ico-sm">üí°</div><div><div class="title">Free transfers</div><div class="sub">Up to 10 domestic transfers/month</div></div></div><div class="tag">Promo</div></div>
      </div>
    </section>

    <!-- CASHOUT -->
    <section class="page" id="page-cashout">
      <div class="card" style="display:grid; gap:10px">
        <label>Agent
          <select id="coAgent">
            <option value="indomaret">Indomaret</option>
            <option value="alfamart">Alfamart</option>
            <option value="pos">POS Agent</option>
          </select>
        </label>
        <label>Amount
          <input id="coAmount" type="number" min="0" step="1000" placeholder="100000"/>
        </label>
        <div class="grid2">
          <button class="btn ghost" data-nav="home">Cancel</button>
          <button class="btn" id="btnCashout">Generate Code</button>
        </div>
      </div>
      <div class="card">
        <div class="row"><div class="left"><div class="ico-sm">‚è±Ô∏è</div><div><div class="title">Code TTL</div><div class="sub">Valid for 30 minutes</div></div></div><div class="tag pend">PENDING</div></div>
      </div>
    </section>

    <!-- PAY BILLS -->
    <section class="page" id="page-pay">
      <div class="card" style="display:grid; gap:10px">
        <label>Biller
          <select id="pbBiller">
            <option value="pln">Electricity (PLN)</option>
            <option value="pdam">Water (PDAM)</option>
            <option value="pajak">Taxes</option>
            <option value="telco">Telco</option>
          </select>
        </label>
        <label>Customer Reference
          <input id="pbRef" placeholder="Customer No / Tax ID"/>
        </label>
        <label>Amount
          <input id="pbAmount" type="number" min="0" step="1000" placeholder="150000"/>
        </label>
        <div class="grid2">
          <button class="btn ghost" data-nav="home">Cancel</button>
          <button class="btn" id="btnPayBill">Pay</button>
        </div>
      </div>
    </section>

    <!-- QR -->
    <section class="page" id="page-qr">
      <div class="card" style="display:grid; gap:10px; place-items:center; text-align:center">
        <div style="font-size:64px">üî≥</div>
        <div class="sub">Simulated QR Scanner</div>
        <button class="btn" id="btnQrPay">Scan & Pay Rp 25.000</button>
        <button class="btn ghost" data-nav="home">Back</button>
      </div>
    </section>

    <!-- TOPUP -->
    <section class="page" id="page-topup">
      <div class="card" style="display:grid; gap:10px">
        <label>Method
          <select id="tuMethod">
            <option value="va">Bank VA</option>
            <option value="card">Card (3DS)</option>
            <option value="wallet">Other Wallet</option>
            <option value="agent">Agent</option>
          </select>
        </label>
        <label>Amount
          <input id="tuAmount" type="number" min="0" step="1000" placeholder="200000"/>
        </label>
        <div class="grid2">
          <button class="btn ghost" data-nav="home">Cancel</button>
          <button class="btn" id="btnTopup">Top Up</button>
        </div>
      </div>
    </section>

    <!-- CARDS -->
    <section class="page" id="page-cards">
      <div class="card" style="display:grid; gap:10px">
        <div class="row"><div class="left"><div class="ico-sm">üí≥</div><div><div class="title">Visa ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ 4242</div><div class="sub">Default tokenized card</div></div></div><button class="chip" id="btnAddCard">+ Add</button></div>
        <button class="btn" id="btnChargeCard">Quick Charge Rp 50.000</button>
      </div>
    </section>

    <!-- REWARDS -->
    <section class="page" id="page-rewards">
      <div class="card" style="display:grid; gap:10px">
        <div class="row"><div class="left"><div class="ico-sm">üéÅ</div><div><div class="title">Cashback Voucher</div><div class="sub">5% up to Rp10.000 on QR payments</div></div></div><div class="tag ok">Active</div></div>
        <div class="row"><div class="left"><div class="ico-sm">‚≠ê</div><div><div class="title">Loyalty Points</div><div class="sub" id="pointsText">0 pts</div></div></div><button class="chip" id="btnRedeem">Redeem</button></div>
      </div>
    </section>

    <!-- PROFILE -->
    <section class="page" id="page-profile">
      <div class="card" style="display:grid; gap:10px">
        <div class="row"><div class="left"><div class="ico-sm">üë§</div><div><div class="title">John Doe</div><div class="sub">+62 812-0000-0000</div></div></div><div class="tag">BASIC</div></div>
        <button class="btn" id="btnUpgrade">Upgrade to PLUS</button>
        <button class="btn ghost" id="btnReset">Reset Demo Data</button>
      </div>
    </section>
  </main>

  <nav>
    <button data-nav="home" class="active"><div class="ni">üè†</div><div class="nt">Home</div></button>
    <button data-nav="transfer"><div class="ni">‚û°Ô∏è</div><div class="nt">Transfer</div></button>
    <button data-nav="pay"><div class="ni">üßæ</div><div class="nt">Bills</div></button>
    <button data-nav="profile"><div class="ni">‚öôÔ∏è</div><div class="nt">Profile</div></button>
  </nav>
</div>

<!-- Modal -->
<div class="modal-backdrop" id="modal">
  <div class="modal">
    <span class="close" id="modalClose">‚úñ</span>
    <h3 id="modalTitle">Title</h3>
    <div id="modalBody">Body</div>
    <div style="display:flex; gap:10px; margin-top:12px; justify-content:flex-end">
      <button class="btn ghost" id="modalCancel">Close</button>
      <button class="btn" id="modalOK">OK</button>
    </div>
  </div>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<script>
  // Simple store
  const S = {
    balance: +(localStorage.getItem('ukiw_balance') ?? 250000),
    points: +(localStorage.getItem('ukiw_points') ?? 120),
    tier: localStorage.getItem('ukiw_tier') ?? 'BASIC',
    tx: JSON.parse(localStorage.getItem('ukiw_tx') ?? '[]'),
    save(){
      localStorage.setItem('ukiw_balance', S.balance);
      localStorage.setItem('ukiw_points', S.points);
      localStorage.setItem('ukiw_tier', S.tier);
      localStorage.setItem('ukiw_tx', JSON.stringify(S.tx.slice(0,30)));
      render();
    }
  };

  // UI helpers
  const fmt = n => 'Rp ' + (n||0).toLocaleString('id-ID');
  const el = id => document.getElementById(id);
  const toast = (msg, ms=1800) => {
    const t=el('toast'); t.textContent=msg; t.style.display='block';
    setTimeout(()=>t.style.display='none', ms);
  };
  const modal = {
    open(title, body, okText='OK', onOk=null){
      el('modalTitle').textContent=title;
      el('modalBody').innerHTML=body;
      el('modal').style.display='grid';
      const okBtn = el('modalOK');
      okBtn.textContent=okText;
      okBtn.onclick = () => { el('modal').style.display='none'; onOk && onOk(); };
    },
    close(){ el('modal').style.display='none'; }
  };

  // Navigation
  function nav(to){
    document.querySelectorAll('nav button').forEach(b=>b.classList.toggle('active', b.dataset.nav===to));
    document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
    el('page-'+to).classList.add('active');
    if(to==='home') renderActivity();
  }
  document.querySelectorAll('[data-nav]').forEach(n=>n.addEventListener('click', e=>{
    const to = e.currentTarget.dataset.nav;
    nav(to);
  }));
  el('modalClose').onclick = modal.close;
  el('modalCancel').onclick = modal.close;

  // Render
  function render(){
    el('balanceText').textContent = fmt(S.balance);
    el('tierPill').textContent = 'Tier: ' + S.tier;
    el('pointsText').textContent = S.points + ' pts';
  }
  function renderActivity(){
    const wrap = el('activityList');
    if(!S.tx.length){ wrap.innerHTML = '<div class="row"><div class="left"><div class="ico-sm">üóíÔ∏è</div><div><div class="title">No activity</div><div class="sub">Start by topping up or paying a bill</div></div></div></div>'; return; }
    wrap.innerHTML = '';
    S.tx.slice(0,8).forEach(t=>{
      const div = document.createElement('div'); div.className='row';
      const sign = t.type==='credit' ? '+' : '-';
      const tagClass = t.status==='COMPLETED'?'ok':(t.status==='PENDING'?'pend':'err');
      div.innerHTML = `
        <div class="left">
          <div class="ico-sm">${t.icon||'üí±'}</div>
          <div>
            <div class="title">${t.title}</div>
            <div class="sub">${new Date(t.ts).toLocaleString('id-ID')} ‚Ä¢ ${t.status}</div>
          </div>
        </div>
        <div style="display:flex; align-items:center; gap:8px">
          <div class="tag ${tagClass}">${t.status}</div>
          <div style="min-width:110px; text-align:right">${sign} ${fmt(t.amount)}</div>
        </div>`;
      wrap.appendChild(div);
    });
  }

  // Actions
  el('btnAddMoney').onclick = ()=> nav('topup');

  el('btnTopup').onclick = ()=>{
    const m = el('tuMethod').value;
    const amt = +el('tuAmount').value||0;
    if(amt<=0) return toast('Enter a valid amount');
    const pendingId = 'TU'+Date.now();
    S.tx.unshift({id:pendingId, ts:Date.now(), title:'Top-up '+m.toUpperCase(), amount:amt, type:'credit', status:'PENDING', icon:'üè¶'});
    S.save();
    toast('Top-up created. Waiting for gateway...');
    // simulate PG callback
    setTimeout(()=>{
      const success = Math.random()>0.15; // 85% success
      const t = S.tx.find(x=>x.id===pendingId);
      if(!t) return;
      if(success){
        t.status='COMPLETED'; S.balance += amt; toast('Top-up successful');
      }else{
        t.status='FAILED'; toast('Top-up failed');
      }
      S.save();
      nav('home');
    }, 1400);
  };

  el('btnTransfer').onclick = ()=>{
    const to = el('tfRecipient').value.trim();
    const amt = +el('tfAmount').value||0;
    if(!to) return toast('Enter recipient');
    if(amt<=0) return toast('Enter amount');
    if(amt>S.balance) return toast('Insufficient balance');
    // risk/pending
    const pending = Math.random()<0.15;
    const id = 'TF'+Date.now();
    if(pending){
      S.tx.unshift({id, ts:Date.now(), title:'P2P to '+to, amount:amt, type:'debit', status:'PENDING', icon:'‚û°Ô∏è'}); S.save();
      toast('Transfer pending review');
      setTimeout(()=>{
        const ok = Math.random()>0.3;
        const t = S.tx.find(x=>x.id===id);
        if(!t) return;
        if(ok){ t.status='COMPLETED'; S.balance -= amt; toast('Transfer sent'); }
        else{ t.status='FAILED'; toast('Transfer failed'); }
        S.save(); nav('home');
      }, 1500);
    } else {
      S.balance -= amt;
      S.tx.unshift({id, ts:Date.now(), title:'P2P to '+to, amount:amt, type:'debit', status:'COMPLETED', icon:'‚û°Ô∏è'});
      S.save(); toast('Transfer sent'); nav('home');
    }
  };

  el('btnCashout').onclick = ()=>{
    const agent = el('coAgent').value;
    const amt = +el('coAmount').value||0;
    if(amt<=0) return toast('Enter amount');
    if(amt>S.balance) return toast('Insufficient balance');
    const code = 'CO-' + Math.floor(100000+Math.random()*899999);
    const id = 'CO'+Date.now();
    S.tx.unshift({id, ts:Date.now(), title:'Cash-out '+agent+' ('+code+')', amount:amt, type:'debit', status:'PENDING', icon:'üè™'}); S.save();
    modal.open('Cash-out Code', `<div style="font-size:14px">Show this code at the agent:</div>
      <div style="margin-top:8px; font-size:22px; letter-spacing:2px; font-weight:800; background:linear-gradient(180deg,var(--gold-2),var(--gold)); -webkit-background-clip:text; color:transparent">${code}</div>`,
      'Done',
      ()=>{});
    // simulate redemption
    setTimeout(()=>{
      const ok = Math.random()>0.2;
      const t = S.tx.find(x=>x.id===id);
      if(!t) return;
      if(ok){ t.status='COMPLETED'; S.balance -= amt; toast('Cash-out completed'); }
      else { t.status='FAILED'; toast('Cash-out failed'); }
      S.save(); nav('home');
    }, 3000);
  };

  el('btnPayBill').onclick = ()=>{
    const biller = el('pbBiller').value.toUpperCase();
    const ref = el('pbRef').value.trim()||'REF-'+Math.floor(Math.random()*99999);
    const amt = +el('pbAmount').value||0;
    if(amt<=0) return toast('Enter amount');
    if(amt>S.balance) return toast('Insufficient balance');
    const id = 'BP'+Date.now();
    S.tx.unshift({id, ts:Date.now(), title:`Bill ${biller} (${ref})`, amount:amt, type:'debit', status:'PENDING', icon:'üßæ'}); S.save();
    toast('Processing with biller...');
    setTimeout(()=>{
      const ok = Math.random()>0.12;
      const t = S.tx.find(x=>x.id===id);
      if(!t) return;
      if(ok){ t.status='COMPLETED'; S.balance -= amt; S.points += Math.floor(amt/50000); toast('Bill paid'); }
      else { t.status='FAILED'; toast('Payment failed'); }
      S.save(); nav('home');
    }, 1800);
  };

  el('btnQrPay').onclick = ()=>{
    const amt = 25000; const id='QR'+Date.now();
    if(amt>S.balance) return toast('Top up required');
    S.tx.unshift({id, ts:Date.now(), title:'QR Payment', amount:amt, type:'debit', status:'COMPLETED', icon:'üî≥'});
    S.balance -= amt; S.points += 2; S.save(); toast('QR payment success'); nav('home');
  };

  el('btnAddCard').onclick = ()=> toast('Card tokenized (demo)');
  el('btnChargeCard').onclick = ()=>{
    const amt=50000; const id='CC'+Date.now();
    S.tx.unshift({id, ts:Date.now(), title:'Card Top-up', amount:amt, type:'credit', status:'PENDING', icon:'üí≥'}); S.save();
    setTimeout(()=>{
      const ok=Math.random()>0.1; const t=S.tx.find(x=>x.id===id);
      if(!t) return;
      if(ok){ t.status='COMPLETED'; S.balance+=amt; toast('Card top-up completed'); }
      else { t.status='FAILED'; toast('Card top-up failed'); }
      S.save(); nav('home');
    }, 1500);
  };

  el('btnRedeem').onclick = ()=>{
    if(S.points<50) return toast('Not enough points');
    S.points -= 50; S.save(); toast('Redeemed 50 pts for voucher');
  };

  el('btnUpgrade').onclick = ()=>{
    if(S.tier==='PLUS') return toast('Already PLUS');
    S.tier='PLUS'; S.save(); toast('Tier upgraded');
  };

  el('btnReset').onclick = ()=>{
    localStorage.removeItem('ukiw_balance');
    localStorage.removeItem('ukiw_points');
    localStorage.removeItem('ukiw_tier');
    localStorage.removeItem('ukiw_tx');
    S.balance=250000; S.points=120; S.tier='BASIC'; S.tx=[]; S.save();
    toast('Demo data reset'); nav('home');
  };

  // Deep links from Home shortcuts
  document.querySelectorAll('.actions .action').forEach(a=>{
    a.addEventListener('click', e=>{
      const to=e.currentTarget.dataset.nav;
      if(to) nav(to);
    });
  });

  // Initialize
  render(); renderActivity();
</script>
</body>
</html>